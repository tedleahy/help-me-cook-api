recipes = [
  {
    name: 'The Ultimate Lasagne',
    image_url: 'https://images.squarespace-cdn.com/content/v1/57ded33ce6f2e1bd883c497d/1582537333808-IYA146BSBCIT1Z7YXGWF/ke17ZwdGBToddI8pDm48kJKo3YTR7zgUvInmXMbZ6zZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0geeCvn1f36QDdcifB7yxGjTk-SMFplgtEhJ5kBshkhu5q5viBDDnY2i_eu2ZnquSA/9K8A6033.jpg?format=750w',
    ingredients: [
      { name: 'onions', amount: 2, amount_unit: 'whole' },
      { name: 'carrots', amount: 2, amount_unit: 'whole' },
      { name: 'celery', amount: 2, amount_unit: 'whole' },
      { name: 'mince', amount: 750, amount_unit: 'grams' },
      { name: 'nutmeg', amount: 1, amount_unit: 'tsp' },
      { name: 'bay leaves', amount: 2, amount_unit: 'whole' },
      { name: 'milk', amount: 1500, amount_unit: 'ml' },
      { name: 'white wine', amount: 500, amount_unit: 'ml' },
      { name: 'tinned tomatoes', amount: 800, amount_unit: 'grams' },
      { name: 'flour', amount: 100, amount_unit: 'grams' },
      { name: 'butter', amount: 100, amount_unit: 'grams' },
      { name: 'lasagne sheets', amount: 500, amount_unit: 'grams' },
      { name: 'parmesan', amount: 250, amount_unit: 'grams' },
      { name: 'mozzarella balls', amount: 2, amount_unit: 'whole' },
      { name: 'salt' },
      { name: 'pepper' },
      { name: 'olive oil' }
    ],
    instructions: [
      'To start making the ultimate ragú, finely dice your onions and celery and grate the carrots. Glug some olive oil into a large heavy-based pan and then pour in the veg and give it a good stir so that they are coated in olive oil. Add a good pinch of salt and allow the veg to cook slowly until they are super soft and transparent.',
      'Once the onions, celery, and carrots have been sweated, whack the mince in and break it up into small pieces of meat.',
      'Once the meat starts to brown, add in the nutmeg and bay leaves and allow it to cook for about 5 minutes.',
      'Once the meat is brown all over pour in 500ml of milk into the pan and stir. Milk is the secret ingredient to making your ragú creamy and removing any acidity. Allow the milk to simmer away in the pan, this might take up to 30 minutes but be patient, it’s worth it!',
      'Once the milk has nearly evaporated away you can add in the white wine. Make sure all the meat is covered by liquid, you can always top it up with water if need be. Turn up the heat slightly and simmer.',
      'Once the wine has evaporated just passed halfway, add in the two tins of tomato, stir and season well then allow it to simmer for at least an hour. The longer you leave it the better the flavour will get. But be careful to keep an eye on it as you don’t want all the liquid to evaporate!',
      'As the ragú simmers away its time to start on the white sauce. We need to make a roux which is the base to our sauce and is made up of the flour and butter. Add the butter into a large saucepan and allow it to melt down. Before it starts to pick up colour add in the flour and mix to form a paste.',
      'Allow the roux to cook for 1 minute and then slowly add in the remaining milk bit by bit while constantly stirring to ensure it doesn’t go lumpy. Once all the milk has been mixed in, add 150g of grated parmesan into the sauce and then season it well.',
      'Preheat the oven to 180°C.',
      'Time to assemble the ultimate lasagne. Make sure you have a deep dish then the first layer of will be a light layer of white sauce, then the lasagne sheets so that the pasta doesn’t stick to the dish. Add a layer of ragú on top of the pasta, then a layer of the white sauce and then close the layer with more lasagne sheets. Repeat until the last layer.',
      'For the last layer, pour on the remaining white sauce and then put on the sliced mozzarella and parmesan to create the ultimate crispy cheesy coating.',
      'Once the lasagne is assembled place into the oven for 30 minutes or until golden brown and crispy. Take it out the oven and allow it to sit for 15 minutes before cutting into it!',
      'Plate up this ultimate lasagne and tuck in!'
    ]
  },
  {
    name: 'Roast Garlic Linguine',
    image_url: 'https://images.squarespace-cdn.com/content/v1/57ded33ce6f2e1bd883c497d/1582134978397-QDPO9ZDAG9BUF0Y8E7DW/ke17ZwdGBToddI8pDm48kO2822-NPugwzY6V5YLKpt8UqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8PaoYXhp6HxIwZIk7-Mi3Tsic-L2IOPH3Dwrhl-Ne3Z2t8hP_8UULPluVTitODIWPk0RshPpo-xNSTAIFuix_gsKMshLAGzx4R3EDFOm1kBS/Screen+Shot+2020-02-19+at+16.49.03.png?format=750w',
    ingredients: [
      { name: 'parmesan', amount: 130, amount_unit: 'grams' },
      { name: 'pecorino', amount: 40, amount_unit: 'grams' },
      { name: 'garlic bulbs', amount: 3, amount_unit: 'whole' },
      { name: 'linguine', amount: 450, amount_unit: 'grams' },
      { name: 'lemon', amount: 1, amount_unit: 'whole' },
      { name: 'pepper', amount: 1.5, amount_unit: 'tbsp' },
      { name: 'salt' }
    ],
    instructions: [
      'Preheat oven to 180°C.',
      'Place your garlic bulbs on a piece of baking paper and wrap them up. Place the garlic parcel in a roasting tin and whack in the oven for 40 minutes.',
      'Very finely grate your Parmesan and your pecorino and add to a mixing bowl. Grate in the zest of a lemon.',
      'Place a frying pan on the heat. Add 1.5 tbsp of pepper into the pan. Toast the pepper, mixing it around the pan, and remove from the heat as it starts properly smoking. Add to the cheese bowl.',
      'Once the garlic is done (it will be squidgy if you press it), remove from the oven. Peel back the skin and with a knife, squish out the roast garlic within. Once all the garlic is squeezed out, discard of the skins. Chop the garlic up until you have a nice smooth paste. Add to the cheese bowl.',
      'Get a fork and mix the cheese and garlic together. Once it is all combined, you should have a nice thick paste.',
      'Now you need to get everything ready, as speed and timing are key. Get a jug out, and boil your kettle. Put your pan on the heat, and add your water – don’t fill it, you only need enough water to cover the pasta (you need the water to be very very starchy).',
      'Add a nice big pinch of salt to the water and bring to the boil. Then add your linguine.',
      'After 4 minutes, with your jug/mug remove 300ml starchy water from pan. Add it bit by bit to your cheese paste, making sure it is all nicely combined. You’ll end up with a nice creamy consistency.',
      'Back to the pasta – after 8 minutes in total, drain the pasta and pour about 200ml pasta water into another cup. You’ll need this.',
      'Add the pasta back to the pan and put the pan back on a very very very low heat. Quickly,  pour over your sauce. Start beating the sauce through the pasta. As it begins to thicken, keep adding splashes of your pasta water. Keep beating and adding splashes. If it gets stringy or lumps of cheese appear, don’t worry. Just keep beating hard and adding water. This will take about 3 minutes – what you are going for is a thick creamy emulsion. Turn off the heat and keep beating for 1 final minute.',
      'Once the consistency of your pasta resembles the photo, you’re ready to go.',
      'Serve the pasta on to 4 plates. Top with an extra grinding of pepper, a sprinkle cheese and a nice squeeze of lemon juice (it really cuts through the rich cheese and garlic). Enjoy MOB x'
    ]
  },
  {
    name: "Nud's Baja Fish Tacos",
    image_url: 'https://images.squarespace-cdn.com/content/v1/57ded33ce6f2e1bd883c497d/1582203503412-I4ICRACF8YRRPCT9XG21/ke17ZwdGBToddI8pDm48kJKo3YTR7zgUvInmXMbZ6zZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0geeCvn1f36QDdcifB7yxGjTk-SMFplgtEhJ5kBshkhu5q5viBDDnY2i_eu2ZnquSA/9K8A3049.jpg?format=750w',
    ingredients: [
      { name: 'cod fillet', amount: 250, amount_unit: 'grams' },
      { name: 'plain flour', amount: 100, amount_unit: 'grams' },
      { name: 'rapeseed oil', amount: 500, amount_unit: 'ml' },
      { name: 'plain flour', amount: 150, amount_unit: 'grams' },
      { name: 'baking powder', amount: 0.5, amount_unit: 'tsp' },
      { name: 'salt', amount: 1, amount_unit: 'tsp' },
      { name: 'sparkling water', amount: 100, amount_unit: 'ml' },
      { name: 'vodka', amount: 100, amount_unit: 'ml' },
      { name: 'mango', amount: 1, amount_unit: 'whole' },
      { name: 'lime juice', amount: 2, amount_unit: 'tbsp' },
      { name: 'jalapeno chilli', amount: 1, amount_unit: 'whole' },
      { name: 'bunch of mint', amount: 1, amount_unit: 'whole' },
      { name: 'salt' },
      { name: 'sugar' },
      { name: 'olive oil' },
      { name: 'mayonnaise', amount: 100, amount_unit: 'ml' },
      { name: 'chipotle in adobo', amount: 35, amount_unit: 'ml' },
      { name: 'sriracha', amount: 35, amount_unit: 'ml' },
      { name: 'red cabbage', amount: 0.5, amount_unit: 'whole' },
      { name: 'limes', amount: 4, amount_unit: 'whole' },
      { name: 'corn tortillas', amount: 8, amount_unit: 'whole' },
      { name: 'bunch of coriander', amount: 1, amount_unit: 'whole' },
    ],
    instructions: [
      'Start by making your mango salsa. Dice your mango into small chunks, finely chop your jalapeños and mint then mix together in a bowl. Squeeze in your lime and add a pinch of salt, pepper, sugar and a drizzle of olive oil. Set aside.',
      'Now for the chipotle mayo, it’s super easy! Just mix together your mayo, sriracha, and chipotle then set aside.',
      'Quarter your cabbage and slice it into thin strips. Set aside.',
      'Next, the wet fish batter. Into a bowl, add 150g plain flour, baking powder, salt, pepper, beer, and vodka. Whisk well to create a smooth batter.',
      'Frying time. Add the remaining flour (100g) to a bowl. Chop your fish into 8 strips and dip each chunk into the flour, shake off any excess then dip it straight into the wet fish batter, making sure it is thoroughly coated.',
      'Heat your rapeseed oil to 180°C. Then, carefully massage the fish into the oil and repeat for all fish chunks. Leave to fry for 4-5 minutes until golden and crunchy.',
      'Once your fish is ready, place it on some kitchen roll to cool down. Meanwhile, warm up your tortillas by placing them in a dry pan over low heat until slightly browned.',
      'Time to assemble! Take a tortilla, place some red cabbage on the bottom, followed your chipotle mayonnaise, then the fried fish and a tsp of the mango salsa. Top with a couple of coriander leaves, a squeeze of lime and a pinch of salt. Tuck in!'
    ]
  },
  {
    name: 'Beet Bourgignon With Mash',
    image_url: 'https://images.squarespace-cdn.com/content/v1/57ded33ce6f2e1bd883c497d/1582124680833-RL9B3EXR9TH81ZE2TQ4X/ke17ZwdGBToddI8pDm48kJKo3YTR7zgUvInmXMbZ6zZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0geeCvn1f36QDdcifB7yxGjTk-SMFplgtEhJ5kBshkhu5q5viBDDnY2i_eu2ZnquSA/image-asset.jpeg?format=750w',
    ingredients: [
      { name: 'red onion', amount: 1, amount_unit: 'whole' },
      { name: 'garlic cloves', amount: 3, amount_unit: 'whole' },
      { name: 'carrots', amount: 2, amount_unit: 'whole' },
      { name: 'beetroots', amount: 4, amount_unit: 'whole' },
      { name: 'portobello mushrooms', amount: 250, amount_unit: 'grams' },
      { name: 'large sprig of thyme', amount: 1, amount_unit: 'whole' },
      { name: 'bay leaves', amount: 3, amount_unit: 'whole' },
      { name: 'tomato puree', amount: 2, amount_unit: 'tbsp' },
      { name: 'smoked paprika', amount: 1, amount_unit: 'tsp' },
      { name: 'red wine vinegar', amount: 2, amount_unit: 'tbsp' },
      { name: 'chopped tomatoes', amount: 400, amount_unit: 'grams' },
      { name: 'red wine', amount: 500, amount_unit: 'ml' },
      { name: 'potatoes', amount: 3, amount_unit: 'whole' },
      { name: 'sweet potato', amount: 1, amount_unit: 'whole' },
      { name: 'bunch of parsley', amount: 1, amount_unit: 'whole' },
      { name: 'lemon', amount: 1, amount_unit: 'whole' },
      { name: 'butter', amount: 40, amount_unit: 'grams' },
      { name: 'salt' },
      { name: 'pepper' },
      { name: 'olive oil' }
    ],
    instructions: [
      'Finely dice the red onion and crush two cloves of garlic. Whack the onions in the pan and cook for about 10 minutes until they’re soft and start to pick up some colour, then add the garlic and cook for a further 2 minutes.',
      'Cut up the carrots and beetroot into similar sized chunks, add them to the onions with the thyme and bay leaves and cook for about 5 minutes. Add the chopped tomatoes then fill the empty tin with water and add that in along with the tomato purée, smoked paprika, red wine and vinegar. Turn up the heat until it boils and then bring it down to a simmer for about 40 minutes.',
      'Peel and chop your potatoes then put on to boil until they are soft enough to mash. Meanwhile, in a separate pan fry up some garlic with some lemon zest. Once the potatoes are ready add them to the garlic and lemon mix with a knob of butter and mash the potatoes until smooth.',
      'Slice up the mushrooms and fry them up in some olive oil until they are golden brown. When the carrots and beetroots are just cooked add the mushrooms and cook the bourguignon for a further 15 minutes.',
      'To serve, add a dollop of mash onto your plate and pour over your steaming bourguignon, and then garnish with a sprinkle of chopped parsley and a sprinkle of salt and pepper. Dig into this perfect winter dish.'
    ]
  },
  {
    name: "Chickpea Stew with 'Nduja and Manchego Toasties",
    image_url: 'https://images.squarespace-cdn.com/content/v1/57ded33ce6f2e1bd883c497d/1581939620162-JWFA84AGE0VN93ONV88M/ke17ZwdGBToddI8pDm48kGtXTjwcOmcOndnwejmz18t7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QHyNOqBUUEtDDsRWrJLTm7u7BWRUStd8ZIYDC1wol3Nxdw516UZgl2fP9TJsFRMsOMzctQ8X_iJIEKO0kw9Z1/Upload.png?format=750w',
    ingredients: [
      { name: 'stale bread', amount: 100, amount_unit: 'grams' },
      { name: 'almonds', amount: 60, amount_unit: 'grams' },
      { name: 'cumin', amount: 1, amount_unit: 'tsp' },
      { name: 'cayenne', amount: 0.5, amount_unit: 'tsp' },
      { name: 'onion', amount: 1, amount_unit: 'whole' },
      { name: 'tomatoes', amount: 800, amount_unit: 'grams' },
      { name: 'white wine', amount: 50, amount_unit: 'ml' },
      { name: 'chickpeas', amount: 400, amount_unit: 'grams' },
      { name: 'vegetable stock', amount: 500, amount_unit: 'ml' },
      { name: 'spinach', amount: 200, amount_unit: 'grams' },
      { name: 'loaf of bread', amount: 1, amount_unit: 'whole' },
      { name: "'nduja paste", amount: 90, amount_unit: 'grams' },
      { name: 'manchego cheese', amount: 200, amount_unit: 'grams' },
      { name: 'bunch of parsley', amount: 1, amount_unit: 'whole' },
      { name: 'salt' },
      { name: 'pepper' },
      { name: 'olive oil' }
    ],
    instructions: [
      'Cut your stale bread into small chunks and roughly chop up your almonds.',
      'Pour a splash of olive oil into a large sauté pan and add the bread for around 5 minutes until they start to turn slightly brown. Add the almonds, cumin and cayenne to the pan and cook for a further 1-2 minutes.',
      'Remove the bread and almond mixture from the pan and tip into a blender. Whizz the mixture up with a splash of water to create a crumbly paste. Leave the mixture to the side until needed.',
      'Slice your onions finely and add them to the sauté pan with a pinch of salt. Once the onions are soft, add the tomatoes and garlic and the white wine, then allow them to simmer for about 15 minutes.',
      'Add the almond and bread mixture to the pan and give it a good stir until it starts to thicken slightly. Add the stock and then the chickpeas with their water and let the stew cook for a further 10 minutes. Season with lots of pepper. Add the spinach and give it a good mix.',
      "It’s finally time to make your manchego toasties. Slice your bread so that there is enough for at least two toasties each, then toast until slightly browned. If you want to add a bit of extra flavour to your toasties, spread a layer of 'Nduja paste on your toasted bread, and then add your manchego. Don’t be scared to add extra manchego on your toastie as it melts away quite quickly.",
      'To serve, place your chickpea stew in a large bowl with your manchego toasties. Drizzle with extra olive oil and garnish with some parsley, then tuck into this healthy delicious stew.'
    ]
  },
  {
    name: 'Meatless Wellington',
    image_url: 'https://images.squarespace-cdn.com/content/v1/57ded33ce6f2e1bd883c497d/1581685360141-YW6YTUZG4TVGP8BQFOXK/ke17ZwdGBToddI8pDm48kJKo3YTR7zgUvInmXMbZ6zZ7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0geeCvn1f36QDdcifB7yxGjTk-SMFplgtEhJ5kBshkhu5q5viBDDnY2i_eu2ZnquSA/9K8A4168.jpg?format=750w',
    ingredients: [
      { name: 'meatless farm meat-free burgers', amount: 4, amount_unit: 'whole' },
      { name: 'cooked beetroot', amount: 1, amount_unit: 'whole' },
      { name: 'paprika', amount: 1, amount_unit: 'tbsp' },
      { name: 'sprig of rosemary', amount: 1, amount_unit: 'whole' },
      { name: 'sprig of thyme', amount: 1, amount_unit: 'whole' },
      { name: 'chestnut mushrooms', amount: 500, amount_unit: 'grams' },
      { name: 'white wine', amount: 100, amount_unit: 'ml' },
      { name: 'puff pastry', amount: 500, amount_unit: 'grams' },
      { name: 'tenderstem broccoli', amount: 400, amount_unit: 'grams' },
      { name: 'onions', amount: 2, amount_unit: 'whole' },
      { name: 'carrot', amount: 1, amount_unit: 'whole' },
      { name: 'celery sticks', amount: 2, amount_unit: 'whole' },
      { name: 'garlic cloves', amount: 2, amount_unit: 'whole' },
      { name: 'vegetable stock', amount: 500, amount_unit: 'ml' },
      { name: 'white wine vinegar', amount: 50, amount_unit: 'ml' },
      { name: 'flour', amount: 1, amount_unit: 'tbsp' },
      { name: 'marmite', amount: 2, amount_unit: 'tsp' },
      { name: 'salt' },
      { name: 'pepper' },
      { name: 'olive oil' }
    ],
    instructions: [
      'Preheat oven to 200°C.',
      'To start the wellington filling, finely dice the onions and celery and grate the carrot. Put them in a saucepan with some olive oil and cook on a low heat until they’re soft, then add the garlic and rosemary then stir on the heat for one minute.',
      'Whack the onions, celery and carrots into a bowl, add the grated beetroot and Meatless Farm Meat-Free Burgers and the paprika. Get in with your hands to combine it into a mixture and season it well with lots of salt and pepper.',
      'Put the mixture onto a sheet of clingfilm and roll it out into a cylinder and then place it in the fridge to cool while you make your mushroom duxelles.',
      'Very finely chop the mushrooms and put them in the pan with a sprig of thyme and your bay leaves. Fry the mushrooms for about 10 minutes stirring often until you have a softened mixture. Season the mushrooms and pour over the white wine and cook for about 10 minutes until all the wine has been absorbed.',
      'Assembling the wellington is easy, so don’t stress. Take out the pastry sheet and unroll it, then slice out a large enough piece to act as a base for the wellington and place it on a large baking tray. Remove the mixture from the fridge and place it on top of the piece of pastry. Spread the mushroom mixture over the top of the wellington. Slice strips of pastry and plait it over the wellington filling.',
      'Put the tenderstem broccoli on the baking tray too and drizzle with some olive oil, salt and pepper. Place your perfectly assembled wellington and broccoli in the oven for approximately 25-30 mins, or until the pastry is golden and the broccoli is charred. You may need to take the broccoli out earlier than the wellington so keep an eye on it.',
      'While the veg and wellington are cooking, start making the onion gravy! Slice the onions finely, add a generous glug of oil into the pan and cook the onions very slowly on a low heat until they are super soft and almost mushy.',
      'Once the onions are soft, add the crushed garlic and vinegar and cook it for a further minute. Next, add the flour and stir for another minute until a paste almost forms then add the vegetable stock and stir well to ensure there are no lumps in your gravy! Add the teaspoons of marmite and stir well.',
      'Strain your gravy and put in a gravy boat, but keep the onions as they make a delicious addition to your meal.',
      'Take the wellington and broccoli out of the oven and get ready to plate up! Place your broccoli on the plate, slice into the wellington with a sharp knife and put it on top of the broccoli. Add the onions to your plate and pour the gravy on top for the perfect meatless wellington dinner.',
    ]
  }
]

recipes.each do |recipe|
  created_recipe = FactoryBot.create(:recipe, recipe.slice(:name, :image_url, :instructions))
  puts "\nCreated recipe '#{created_recipe.name}'"

  recipe[:ingredients].each do |ingredient|
    # Ingredient factory handles returning ingredient if it exists, else creating it
    created_ingredient = FactoryBot.create(:ingredient, ingredient.slice(:name))
    FactoryBot.create(:ingredient_recipe, recipe: created_recipe,
                                          ingredient: created_ingredient,
                                          amount: ingredient[:amount],
                                          amount_unit: ingredient[:amount_unit])
    puts "Added ingredient '#{created_ingredient.name}' to recipe '#{created_recipe.name}'"
  end
end
